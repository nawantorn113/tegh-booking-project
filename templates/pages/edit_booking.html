{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}แก้ไขการจอง: {{ booking.title }}{% endblock %}
{% block page_title %}<i class="bi bi-pencil-square me-2"></i>แก้ไขการจอง{% endblock %}

{% block extra_head %}
{{ form.media.css }}
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" rel="stylesheet" />

<style>
/*  จัดกล่องฟอร์มให้ดูโดดเด่น */
.form-card {
    background: #ffffff;
    border-radius: 1.5rem;
    box-shadow: 0 6px 16px rgba(0,0,0,0.1);
    padding: 3rem;
    max-width: 700px;
    margin: 60px auto;
    transition: all 0.3s ease;
}
.form-card:hover {
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
}

/* หัวข้อใหญ่ตรงกลาง */
.form-card h4 {
    font-weight: 700;
    color: #0d6efd;
    text-align: center;
    margin-bottom: 1.5rem;
}

/* ปุ่ม */
.form-actions {
    display: flex;
    justify-content: flex-end;
    margin-top: 1.5rem;
}
.form-actions a, .form-actions button {
    min-width: 130px;
}

/* Responsive ปรับขนาดอัตโนมัติ */
@media (max-width: 576px) {
    .form-card {
        padding: 1.5rem;
        margin: 30px 1rem;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="form-card animate__animated animate__fadeIn">
    <h4>แก้ไขการจองห้อง: {{ booking.room.name }}</h4>

    <form method="POST" enctype="multipart/form-data" id="bookingForm">
        {% csrf_token %}
        {{ form|crispy }}

        <div class="form-actions">
            <a href="{% url 'history'%}" class="btn btn-outline-danger me-2">
                <i class=""></i> ยกเลิก
            </a>
            <button type="submit" class="btn btn-outline-primary px-4">
                <i class=""></i> บันทึกข้อมูล
            </button>
        </div>
    </form>
</div>
{% endblock %}

{% block extra_scripts %}
{{ form.media.js }}
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.full.min.js"></script>

<script>
$(document).ready(function() {
    //  ตั้งค่า Select2 ให้ดูเข้ากับ Bootstrap
    $('select').select2({
        theme: 'bootstrap-5',
        language: 'th',
        width: '100%'
    });
});
</script>
{% endblock %}
