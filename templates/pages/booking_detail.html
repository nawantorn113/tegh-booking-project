{% extends 'base.html' %}

{% block title %}รายละเอียดการจอง - {{ booking.title }}{% endblock %}

{% block extra_head %}
<style>
    .status-pending { color: #ffc107; font-weight: bold; }
    .status-approved { color: #198754; font-weight: bold; }
    .status-rejected { color: #dc3545; font-weight: bold; }
    .booking-card { max-width: 800px; margin: 0 auto; }
</style>
{% endblock %}

{% block content %}
<div class="container py-4">

    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="mb-0"><i class="bi bi-calendar-check me-2"></i>รายละเอียดการจอง</h1>
        <a href="{% url 'dashboard' %}" class="btn btn-outline-secondary">
            <i class="bi bi-grid-fill me-1"></i> กลับไป Dashboard
        </a>
    </div>

    <div class="card shadow-sm booking-card">
        <div class="card-body">
            <h4 class="card-title mb-3">{{ booking.title }}</h4>

            <p><strong>ห้องประชุม:</strong> {{ booking.room.name }}</p>
            <p><strong>ผู้จอง:</strong> {{ booking.user.get_full_name }}</p>
            <p>
                <strong>วันที่ & เวลา:</strong> 
                {{ booking.start_time|date:"d/m/Y H:i" }} - {{ booking.end_time|date:"d/m/Y H:i" }}
            </p>
            <p><strong>รายละเอียด:</strong> {{ booking.description|default:"-" }}</p>

            <p>
                <strong>สถานะ:</strong> 
                {% if booking.status == 'PENDING' %}
                    <span class="status-pending">รอดำเนินการ</span>
                {% elif booking.status == 'APPROVED' %}
                    <span class="status-approved">อนุมัติแล้ว</span>
                {% elif booking.status == 'REJECTED' %}
                    <span class="status-rejected">ปฏิเสธ</span>
                {% else %}
                    <span>{{ booking.get_status_display }}</span>
                {% endif %}
            </p>

            <div class="mt-4">
                {% if request.user == booking.booked_by or request.user.is_superuser %}
                    <a href="{% url 'booking_edit' booking.id %}" class="btn btn-primary me-2">
                        <i class="bi bi-pencil-square me-1"></i> แก้ไข
                    </a>
                    <a href="{% url 'booking_cancel' booking.id %}" class="btn btn-danger">
                        <i class="bi bi-x-circle me-1"></i> ยกเลิก
                    </a>
                {% endif %}
            </div>
        </div>
    </div>

</div>
{% endblock %}
